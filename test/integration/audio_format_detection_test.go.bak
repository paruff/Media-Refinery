package integration_test

import (
    "testing"

    "github.com/paruff/Media-Refinery/pkg/audio"
    "github.com/stretchr/testify/assert"
    "github.com/stretchr/testify/require"
)

// TestFormatDetection_AllFormats tests format detection for all supported types
func TestFormatDetection_AllFormats(t *testing.T) {
    if testing.Short() {
        t.Skip("Skipping integration test in short mode")
    }

    testCases := []struct {
        name       string
        file       string
        wantFormat string
    }{
        {"MP3 file", "testdata/audio/sample.mp3", "mp3"},
        {"AAC file", "testdata/audio/sample.aac", "aac"},
        {"M4A file", "testdata/audio/sample-alac.m4a", "m4a"},
        {"OGG file", "testdata/audio/sample.ogg", "ogg"},
        {"WAV file", "testdata/audio/sample.wav", "wav"},
        {"OPUS file", "testdata/audio/sample.opus", "opus"},
        {"FLAC file", "testdata/audio/sample.flac", "flac"},
    }

    detector :=package integration_test

import (
    "testing"

    "github.
 
import (
    "testing" t.Run(tc.name, func(t *testing.T) {
            format, err := detector.DetectFormat(tc.file)
            require.NoError(t, err)
            assert.Equal(t, tc.funtFormat, format)
        })
    }
}
